

## [`[`app/backend`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fapp.py%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A560%2C%22character%22%3A4%7D%5D "app/backend/app.py")`](command:_github.copilot.openRelativePath?%5B%7B%22scheme%22%3A%22file%22%2C%22authority%22%3A%22%22%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%22%2C%22query%22%3A%22%22%2C%22fragment%22%3A%22%22%7D%5D "c:\Users\azureuser\azure-search-openai-demo\app\backend") Directory

This directory contains the backend logic of the application.

### [`[`config.py`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fconfig.py%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A0%2C%22character%22%3A0%7D%5D "app/backend/config.py")`](command:_github.copilot.openRelativePath?%5B%7B%22scheme%22%3A%22file%22%2C%22authority%22%3A%22%22%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fconfig.py%22%2C%22query%22%3A%22%22%2C%22fragment%22%3A%22%22%7D%5D "c:\Users\azureuser\azure-search-openai-demo\app\backend\config.py")

This file contains the configuration constants for the application. These constants are used throughout the application to configure various services and features. Some of the constants include:

- [`CONFIG_OPENAI_TOKEN`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fconfig.py%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A0%2C%22character%22%3A0%7D%5D "app/backend/config.py"): The token for OpenAI.
- [`CONFIG_CREDENTIAL`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fconfig.py%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A1%2C%22character%22%3A0%7D%5D "app/backend/config.py"): The Azure credential.
- [`CONFIG_ASK_APPROACH`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fconfig.py%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A2%2C%22character%22%3A0%7D%5D "app/backend/config.py"): The approach to use for asking questions.
- [`CONFIG_ASK_VISION_APPROACH`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fconfig.py%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A3%2C%22character%22%3A0%7D%5D "app/backend/config.py"): The approach to use for asking vision-related questions.
- [`CONFIG_CHAT_VISION_APPROACH`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fconfig.py%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A4%2C%22character%22%3A0%7D%5D "app/backend/config.py"): The approach to use for chat vision.
- [`CONFIG_CHAT_APPROACH`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fconfig.py%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A5%2C%22character%22%3A0%7D%5D "app/backend/config.py"): The approach to use for chat.
- [`CONFIG_BLOB_CONTAINER_CLIENT`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fconfig.py%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A6%2C%22character%22%3A0%7D%5D "app/backend/config.py"): The blob container client.
- [`CONFIG_USER_UPLOAD_ENABLED`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fconfig.py%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A7%2C%22character%22%3A0%7D%5D "app/backend/config.py"): A flag indicating whether user upload is enabled.
- [`CONFIG_USER_BLOB_CONTAINER_CLIENT`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fconfig.py%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A8%2C%22character%22%3A0%7D%5D "app/backend/config.py"): The user blob container client.
- [`CONFIG_AUTH_CLIENT`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fconfig.py%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A9%2C%22character%22%3A0%7D%5D "app/backend/config.py"): The authentication client.
- [`CONFIG_GPT4V_DEPLOYED`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fconfig.py%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A10%2C%22character%22%3A0%7D%5D "app/backend/config.py"): A flag indicating whether GPT-4V is deployed.
- [`CONFIG_SEMANTIC_RANKER_DEPLOYED`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fconfig.py%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A11%2C%22character%22%3A0%7D%5D "app/backend/config.py"): A flag indicating whether the semantic ranker is deployed.
- [`CONFIG_VECTOR_SEARCH_ENABLED`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fconfig.py%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A12%2C%22character%22%3A0%7D%5D "app/backend/config.py"): A flag indicating whether vector search is enabled.
- [`CONFIG_SEARCH_CLIENT`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fconfig.py%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A13%2C%22character%22%3A0%7D%5D "app/backend/config.py"): The search client.
- [`CONFIG_OPENAI_CLIENT`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fconfig.py%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A14%2C%22character%22%3A0%7D%5D "app/backend/config.py"): The OpenAI client.
- [`CONFIG_INGESTER`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fconfig.py%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A15%2C%22character%22%3A0%7D%5D "app/backend/config.py"): The ingester.

### [`[`app.py`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fapp.py%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A560%2C%22character%22%3A4%7D%5D "app/backend/app.py")`](command:_github.copilot.openRelativePath?%5B%7B%22scheme%22%3A%22file%22%2C%22authority%22%3A%22%22%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fapp.py%22%2C%22query%22%3A%22%22%2C%22fragment%22%3A%22%22%7D%5D "c:\Users\azureuser\azure-search-openai-demo\app\backend\app.py")

This file contains the main application logic. It includes the setup of various clients and services, as well as the definition of the application's routes. Some of the key functions include:

- `setup_clients()`: This function sets up various clients and services, such as the Azure credential, blob container client, and OpenAI client, among others.
- `index()`: This function serves the index page of the application.
- `redirect()`: This function handles redirections.
- `favicon()`: This function serves the favicon of the application.
- `assets()`: This function serves the assets of the application.
- `content_file()`: This function serves content files from blob storage.
- `ask()`: This function handles the "ask" route of the application.

The file also includes the [`JSONEncoder`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fapp.py%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A170%2C%22character%22%3A6%7D%5D "app/backend/app.py") class for encoding JSON, and the [`format_as_ndjson()`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fazureuser%2Fazure-search-openai-demo%2Fapp%2Fbackend%2Fapp.py%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A177%2C%22character%22%3A10%7D%5D "app/backend/app.py") function for formatting data as NDJSON.

Please refer to the source code in [`config.py`](command:_github.copilot.openSymbolInFile?%5B%22app%2Fbackend%2Fconfig.py%22%2C%22config.py%22%5D "app/backend/config.py") and [`app.py`](command:_github.copilot.openSymbolInFile?%5B%22app%2Fbackend%2Fapp.py%22%2C%22app.py%22%5D "app/backend/app.py") for more details.